
<div id="treeListDemo" class="mb-3 border">
    @(Html.DevExtreme().DataGrid<ERPKeeperCore.Enterprise.Models.Customers.Customer>()
    .ID("gridList")
    .DataSource(d => d.RemoteController().Key("Id")
    .LoadUrl($"/API/{CompanyId}/Customers/Customers/All")
  @*  .InsertUrl($"/API/{CompanyId}/Customers/Customers/Insert")
    .UpdateUrl($"/API/{CompanyId}/Customers/Customers/Update")
    .UpdateMethod("Post")
    .DeleteUrl($"/API/{CompanyId}/Customers/Customers/Delete")
    .DeleteMethod("Post")*@
    )
    .KeyExpr("Id")
    .RowAlternationEnabled(true)
    
        
    .ShowRowLines(true)
    .ShowBorders(false)
    .Paging(paging => paging.PageSize(100))
    .Editing(editing => editing.Mode(GridEditMode.Row).AllowUpdating(false)@*
            .AllowDeleting(true)*@
    .AllowAdding(false)
    )

    //.SearchPanel(searchPanel => searchPanel.Visible(true))
    .HeaderFilter(headerFilter => headerFilter.Visible(true))
   @* .FilterRow(filterRow => filterRow
    .Visible(true)
    .ApplyFilter(GridApplyFilterMode.Auto)
    )*@
    .ColumnAutoWidth(false)
        @*.AutoExpandAll(true)*@
    .RowDragging(rd => rd
    .AllowDropInsideItem(false)
    .AllowReordering(false)
        @*.OnDragChange("onDragChange")
            .OnDragEnd("onDragEnd")
            .ShowDragIcons(false)*@
    )
    .Columns(columns => {
    columns.AddFor(m=>m.ProfileId).Width(150)
    .Lookup(lookup => lookup
            .DataSource(Organization.ErpCOREDBContext.Profiles.Select(i => new { Value = i.Id, Text = i.TaxNumber}))
            .DisplayExpr("Text")
            .ValueExpr("Value"))
            .AllowEditing(false)
            .HeaderCellTemplate(@<text>TAX</text>)
            .CellTemplate(@<text><a href="/@CompanyId/Customers/Customers/<%= data.ProfileUid %>/"><%= displayValue %></a></text>);

    columns.AddFor(m=>m.ProfileId).Width(80)
    .Lookup(lookup => lookup
            .DataSource(Organization.ErpCOREDBContext.Profiles.Select(i => new { Value = i.Id, Text = i.ShotName}))
            .DisplayExpr("Text")
            .ValueExpr("Value"))
            .AllowEditing(false)
            .HeaderCellTemplate(@<text>SN</text>)
            .CellTemplate(@<text><a href="/@CompanyId/Customers/Customers/<%= data.ProfileUid %>/"><%= displayValue %></a></text>);

        
    columns.AddFor(m=>m.ProfileId).Lookup(lookup => lookup
            .DataSource(Organization.ErpCOREDBContext.Profiles.Select(i => new { Value = i.Id, Text = i.Name}))
            .DisplayExpr("Text")
            .ValueExpr("Value"))
            .AllowEditing(false)
            .HeaderCellTemplate(@<text>Customer</text>)
            .CellTemplate(@<text><a href="/@CompanyId/Customers/Customers/<%= data.ProfileUid %>/"><%= displayValue %></a></text>);

    columns.AddFor(m=>m.TotalBalance).Width(130).HeaderCellTemplate(@<text>Balance</text>).Format(Format.FixedPoint);
 
    })
    )
</div>


